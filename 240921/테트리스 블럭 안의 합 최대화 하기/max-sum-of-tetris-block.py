n, m = map(int, input().split())
board = [list(map(int, input().split())) for _ in range(n)]
tetrises = [[[0,0],[0,1],[0,2],[0,3]], [[0,0],[1,0],[2,0],[3,0]], [[0,0],[0,1],[1,0],[1,1]], [[0,0],[1,0],[1,1],[2,1]], [[0,1],[0,2],[1,0],[1,1]], [[0,1],[1,0],[1,1],[2,0]], [[0,0],[0,1],[1,1],[1,2]], [[0,0],[1,0],[2,0],[2,1]], [[0,0],[0,1],[0,2],[1,0]], [[0,0],[0,1],[1,1],[2,1]], [[0,2],[1,0],[1,1],[1,2]], [[0,1],[1,1],[2,1],[2,0]], [[0,0],[1,0],[1,1],[1,2]], [[0,0],[0,1],[1,0],[2,0]], [[0,0],[0,1],[0,2],[1,2]], [[0,0],[1,0],[2,0],[1,1]], [[0,0],[0,1],[0,2],[1,1]], [[0,1],[1,1],[2,1],[1,0]], [[1,0],[1,1],[1,2],[0,1]]]
findmax = []
for i in range(n):
    for j in range(m):
        for k in range(len(tetrises)):
            cnt = 0
            for l in tetrises[k]:
                y,x = l[0] + i, l[1] + j
                if 0<=y<n and 0<=x<m:
                    cnt += board[y][x]
                findmax.append(cnt)
print(max(findmax))